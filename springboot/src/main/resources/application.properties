# Application Configuration
spring.application.name=descripto-api-backend
server.port=8080
server.servlet.context-path=/api/v1
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain
server.error.include-message=always
server.error.include-binding-errors=always
server.timezone=UTC

# Jackson Configuration
spring.jackson.default-property-inclusion=non_null
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.write-dates-with-zone-id=true
spring.jackson.deserialization.fail-on-unknown-properties=false
spring.jackson.deserialization.adjust-dates-to-context-time-zone=false
spring.jackson.time-zone=UTC
spring.jackson.date-format=yyyy-MM-dd'T'HH:mm:ss.SSS'Z'

# Management Endpoints
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true

# Logging Configuration
logging.pattern.console=%d{yyyy-MM-dd'T'HH:mm:ss.SSS'Z'} [%thread] %-5level %logger{36} [%X{requestId}] - %msg%n
logging.pattern.file=%d{yyyy-MM-dd'T'HH:mm:ss.SSS'Z'} [%thread] %-5level %logger{36} [%X{requestId}] - %msg%n
logging.file.name=logs/application.log
logging.file.max-size=10MB
logging.file.max-history=30
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=30
logging.logback.rollingpolicy.total-size-cap=1GB
logging.logback.rollingpolicy.clean-history-on-start=false
logging.logback.timezone=UTC

# JWT Configuration
# The secret key must be at least 256 bits (32 bytes) for HMAC-SHA256
# This is a 512-bit key (64 bytes) which is secure for all HMAC-SHA algorithms
jwt.secret=9a4f2c8d3b7a1e6f45c8a0b3f267d8b1d4e6f3c8a9d2b5f8e3a7c4d9f2e5b8a1c4d7f2b9a3e6c8w5n7m4v2z9x8
jwt.expiration=86400000
jwt.refresh-expiration=604800000
jwt.timezone=UTC

# OpenAPI Configuration
springdoc.api-docs.enabled=true
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui
springdoc.swagger-ui.configUrl=/api/v1/v3/api-docs/swagger-config
springdoc.swagger-ui.url=/api/v1/v3/api-docs
springdoc.swagger-ui.disable-swagger-default-url=false
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.persist-authorization=true
springdoc.swagger-ui.doc-expansion=none
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.default-models-expand-depth=1
springdoc.swagger-ui.default-model-expand-depth=1
springdoc.swagger-ui.syntax-highlight.activated=true
springdoc.swagger-ui.try-it-out-enabled=true
springdoc.swagger-ui.filter=true
springdoc.default-produces-media-type=application/json
springdoc.default-consumes-media-type=application/json
springdoc.show-actuator=true
springdoc.use-management-port=false
springdoc.writer-with-default-pretty-printer=true
springdoc.model-and-view-allowed=true
springdoc.override-with-generic-response=true
springdoc.packages-to-scan=com.descripto.api
springdoc.paths-to-match=/**
springdoc.swagger-ui.layout=BaseLayout
springdoc.swagger-ui.with-credentials=true
springdoc.swagger-ui.csrf.enabled=false
springdoc.swagger-ui.deep-linking=true
springdoc.swagger-ui.show-extensions=true
springdoc.swagger-ui.show-common-extensions=true
springdoc.swagger-ui.urls-primary-name=Descripto API v1

# Add these new properties
springdoc.swagger-ui.config-url=${server.servlet.context-path}/v3/api-docs/swagger-config
springdoc.swagger-ui.url=${server.servlet.context-path}/v3/api-docs
springdoc.api-docs.resolve-schema-properties=true
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.display-query-params=true
springdoc.swagger-ui.display-operation-id=true
springdoc.swagger-ui.default-model-rendering=model
springdoc.swagger-ui.supported-submit-methods=["get", "put", "post", "delete", "options", "head", "patch", "trace"]
springdoc.swagger-ui.use-root-path=true

# API Documentation
api.title=Descripto API
api.description=Secure API Management Backend for Descripto-AI
api.version=1.0.0
api.contact.name=Descripto Team
api.contact.email=support@descripto.ai
api.contact.url=https://descripto.ai
api.license.name=MIT License
api.license.url=https://opensource.org/licenses/MIT
api.server.url=http://localhost:8080/api/v1
api.server.description=Default Server 

# Database Configuration
spring.datasource.url=jdbc:postgresql://6-eiho.h.filess.io:61007/DescriptoAI_heartburst
spring.datasource.username=DescriptoAI_heartburst
spring.datasource.password=9863f51e7b790fa9e9384e08ad86883f8c60f13a
spring.datasource.hikari.schema=DescriptoAI_heartburst
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Database Schema Configuration
spring.jpa.properties.hibernate.default_schema=DescriptoAI_heartburst
spring.sql.init.mode=always

# Ensure schema creation
spring.jpa.properties.hibernate.hbm2ddl.create_namespaces=true
spring.jpa.properties.hibernate.create_empty_composites.enabled=true

# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1200000 

# Add profile configuration
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev} 